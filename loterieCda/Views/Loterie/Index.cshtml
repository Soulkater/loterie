@model loterieCda.Models.LoterieViewModel

@{
    ViewData["Title"] = "Home Page";

}

<div id="resultat">
    <div id="cagnotte">
        Cagnotte actuelle : @Model.CagnotteTirage
    </div>

    <div id="gain">
        Gain : xx choux
    </div>
</div>

<div id="info" style="display: none">
    <p>Code partie actuelle :</p>
    <p>@Model.Guid</p>
    <p class="alert">! VEUILLEZ LE NOTER !</p>
</div>

@{
    // Algorithme de comparaison
    //int[] Lottery = new int[6];
    //int[] Guessing = new int[6];

    //Random r = new Random();
    //for (int i = 0; i < Lottery.Length; i++)
    //{
    //    Lottery[i] = r.Next(1, 50);
    //}
    //Array.Sort(Lottery);

    // Génère dynamiquement la grille
    for (int i = 1; i < 50; i++)
    {
        <div id="grille-total">
            <div class="grille">
                <input type="button" value="@i" id="@i" onclick="jouer(this.value)">
            </div>
        </div>

        // Saut de ligne au reste de la division euclidienne
        if (i % 7 == 0)
        {
            <br />
        }
    }
}

<form asp-action="Create" asp-controller="Loterie" method="post">
    <div>
        @* Je cache quelques input *@
        <input type="hidden" asp-for="GrillePartie">
        <input type="hidden" asp-for="Guid">
        <input type="hidden" asp-for="ResultatTirage">
        @* ... *@
        <span asp-validation-for="GrillePartie"></span>
        <span asp-validation-for="ResultatTirage"></span>
    </div>
    <div class="section-btn-valider-reinitisaliser">
        <input type="submit" value="Valider">
        <input type="reset" value="Réinitialiser">
    </div>
</form>

<div id="message"></div>

<div id="selection"></div>

<script>
    $i = 0;
    var valConcat = "";
    function jouer(val) {
        valConcat += val + ",";

        if ($i < 6) {
            // Cache l'input
            document.getElementById(val).style.visibility = "hidden";
            // Affiche l'input dans la DIV
            document.getElementById("selection").innerHTML += '<div class="btn-selection">' + val + '</div>';
            $i++;

            if ($i === 6) {
                // J'affiche la DIV avec les informations
                document.getElementById('info').style.display = "block";
                // J'affiche un message d'information à l'utilisateur
                document.getElementById("message").innerHTML = '<p>VOTRE SELECTION EST TERMINE, VOUS POUVEZ VALIDER</p>';
                // Permet de choper la string de la saisie de l'utilisateur de la grille
                document.getElementsByName("GrillePartie")[0].value = valConcat.substring(0, valConcat.length - 1);
            }
        }
    }
</script>